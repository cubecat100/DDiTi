<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.ILectureMapper">


	<!-- 강의 목록 -->
	<select id="getLectureList" resultType="classVO">
		SELECT
			class_no
			, lec_no
			, mem_no
			, room_no
			, value_type
			, class_name
			, lec_point
			, semester
			, class_req_code
			, class_max_mem
			, class_total_time
			, class_week_cnt
			, class_note
			, file_no
		FROM class
		WHERE
			class_status_code = 'CLS004'
			and semester = '2024/03'
	</select>
	
	<select id="ReservClassDuplicateCheck" parameterType="reserveClassVO" resultType="int">
		SELECT
			count(*)
		FROM reserve_class
		WHERE
			class_no = #{classNo}
			and mem_no = #{memNo}
	</select>
	
	<!-- 예비 수강목록 추가 -->
	<insert id="addReservClass" parameterType="reserveClassVO">
		INSERT INTO reserve_class(
			class_no
			, mem_no
		) values (
			#{classNo}
			, #{memNo}
		)
		
	</insert>
	
	<select id="reserveClassList" parameterType="int" resultType="classVO">
		SELECT
			c.class_no
			, lec_no
			, c.mem_no
			, room_no
			, value_type
			, class_name
			, lec_point
			, semester
			, class_req_code
			, class_max_mem
			, class_total_time
			, class_week_cnt
			, class_note
			, file_no
		FROM class c, reserve_class rc
		WHERE
			rc.class_no = c.class_no
			and rc.mem_no = #{memNo}
	</select>
	
	<delete id="removeReservClass" parameterType="reserveClassVO">
		DELETE
		FROM reserve_class
		WHERE 
			mem_no = #{memNo}
			and class_no = #{classNo }
	</delete>
	
	<!-- 강의 목록 상세 -->
	<select id="getMyLectureList" resultType="ClassVO">
			SELECT
			class_no
			, lec_no
			, mem_no
			, room_no
			, value_type
			, class_name
			, lec_point
			, semester
			, class_req_code
			, class_max_mem
			, class_total_time
			, class_week_cnt
			, class_note
			, file_no
		FROM class
	
	</select>
</mapper>