<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>   

    <style type="text/css">
      * {
        box-sizing: border-box;
        -moz-box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
      }
      .page {
        width: 21cm;
        height: 29.7cm;
        padding: 1.5cm 1.5cm 2cm 1.5cm;
        border: 1px solid #ccc;
        position: relative;
      }
      @media print {
        .page {
          margin: 0;
          border: initial;
          border-radius: initial;
          width: initial;
          min-height: initial;
          box-shadow: initial;
          background: initial;
          page-break-after: always;
        }
      }
      @page {
        size: A4;
        margin: 0;
      }
      .box {
        width: 100%;
        height: 100%;
        text-align: center;
        table-layout: fixed;
        position: relative;
        border-style: double;
        border-width: 7px;
        border-color: #828282;
      }
      .box > * {
        position: absolute;
      }
      .header {
        top: 0;
        left: 3%;
      }
      .title {
        top: 5%;
        left: 50%;
        transform: translate(-50%, -10%);
      }
      .table1 {
        border: 1px solid #ccc;
        width: 100%;
        top: 14%;
      }
      .table1 td {
        border: 1px solid #ccc;
      }
      .table2 {
        width: 100%;
        max-height: 50%;
        top: 25%;
        font-size: small;
      }
      .table2 td {
        border-bottom: 1px solid #ccc;
      }
      td {
        padding: 10px;
      }
      .color {
        background-color: #ccc;
      }
      .footer {
        display: flex;
        flex-direction: column;
        bottom: 3%;
        left: 0;
        width: 100%;
        height: 20%;
      }
      .footer > * {
        width: 100%;
      }
      .dojang {
        bottom: 3%;
        right: 25%;
      }
      .dojang img {
        width: 100px;
        height: 100px;
        opacity: 0.7;
      }
      .logo {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: -1;
      }
      .logo img {
        width: 550px;
        height: 550px;
        opacity: 0.3;
      }
    </style>

    <title>성적증명서</title>
  </head>
  <body>
    <div class="page">
      <div class="box">
        <div class="header">
          <p>제 2024-049589 호</p>
        </div>
        <div class="title">
          <h1>성 적 증 명 서</h1>
        </div>

        <table class="table1">
          <tr>
            <td colspan="1" class="color">성명</td>
            <td colspan="3">${member.memName }</td>
            <td colspan="1" class="color">학번</td>
            <td colspan="3"><!-- 20201234 -->${member.dprtNo }</td>
          </tr>
          <tr>

            <td colspan="1" class="color">학과 </td>
            <td colspan="3">
				  <c:set var="dpc"/>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC001' }">
		          	<c:set var="dpc" value="인문"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC002' }">
		          	<c:set var="dpc" value="사회"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC003' }">
		          	<c:set var="dpc" value="교육"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC004' }">
		          	<c:set var="dpc" value="공학"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC005' }">
		          	<c:set var="dpc" value="자연"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC006' }">
		          	<c:set var="dpc" value="의약"/>
		          </c:if>
		          <c:if test="${member.departmentVO.dprtCategory eq 'DPC007' }">
		          	<c:set var="dpc" value="예체능"/>
		          </c:if>   
		         ${dpc }대학 ${member.departmentVO.dprtName }      	
            </td>

            <td colspan="1" class="color">학적상태</td>
			 	<td colspan="3"><!-- 재학 -->
		 		<c:set var="stuInfo"/>
				  <c:choose>
					    <c:when test="${member.studentInfoVO.memStatusCode eq 'MEM001'}">
					      <c:set var="stuInfo" value="재학"/>
					    </c:when>
					    <c:when test="${member.studentInfoVO.memStatusCode eq 'MEM002'}">
					      <c:set var="stuInfo" value="휴학"/>
					    </c:when>
					    <c:when test="${member.studentInfoVO.memStatusCode eq 'MEM003'}">
					      <c:set var="stuInfo" value="제적"/>
					    </c:when>
					    <c:when test="${member.studentInfoVO.memStatusCode eq 'MEM004'}">
					      <c:set var="stuInfo" value="졸업"/>
					    </c:when>
					    <c:when test="${member.studentInfoVO.memStatusCode eq 'MEM005'}">
					      <c:set var="stuInfo" value="수료"/>
					    </c:when>
				  </c:choose>
				  ${stuInfo }
				</td>
          </tr>
        </table>
        <table class="table2">
          <tr>
            <td colspan="2" class="color">학기</td>
            <td colspan="2" class="color">취득학점</td>
            <td colspan="2" class="color">성적</td>
          </tr>
			  <tr>
         		<c:forEach items="${member.classList}" var="member" >
			    <td colspan="2"> ${member.semester } / 1학기</td>
		        <td colspan="2"> ${member.lecPoint } /4.5 학점</td>
         		</c:forEach>
			<c:forEach items="${member.listenerList}" var="member">
            		<td colspan="2"> ${member.classScore} </td>
			</c:forEach>
			  </tr>
          		

<%--      <tr>
            <td colspan="2">2020년 / 1학기 ${member.ClassVO.semester } </td>
            <td colspan="2">2  ${member.ClassVO.lecPoint }</td>
           <td colspan="2">A+  ${member.ListenerVO.classScore }</td>
          </tr>
          <tr>
            <td colspan="2">2020년 / 1학기  ${member.ClassVO.semester }</td>
            <td colspan="2">2  ${member.ClassVO.lecPoint }</td>
            <td colspan="2">A+  ${member.ListenerVO.classScore }</td>
          </tr>
          <tr>
            <td colspan="2">2020년 / 1학기  ${member.ClassVO.semester }</td>
            <td colspan="2">2  ${member.ClassVO.lecPoint }</td>
            <td colspan="2">A+  ${member.ListenerVO.classScore }</td>
          </tr> --%>
        </table>

        <div class="footer">
          <p>위 사실을 증명합니다.</p>
          <p>2024년 01월 12일</p>

          <h2>대 육 대 학 교 총 장</h2>
        </div>

        <div class="dojang">
          <img src="${pageContext.request.contextPath}/resources/images/dojang.png" alt="" />
        </div>

        
        <div class="logo">
          <img src="${pageContext.request.contextPath}/resources/images/logo.png" alt="">
      </div>
      </div>
    </div>
  </body>
</html>


<script>

/* 
var classList = ${member.classList};
var totalPoints = 0;
var totalCredits = 0;

// 각 과목의 평점과 이수학점을 반복하여 총합 계산
for (var i = 0; i < classList.length; i++) {
    totalPoints += classList[i].lecPoint * convertGradeToPoint(classList[i].classScore);
    totalCredits += classList[i].lecPoint;
}

// 총합을 총 이수학점으로 나누어 평균 계산
var averageGrade = totalPoints / totalCredits;

// 평균을 학점으로 변환하는 함수
function convertGradeToPoint(grade) {
    // 여기에 각 학점을 숫자로 변환하는 로직을 추가하세요
    // 예를 들어, A+를 4.5로, A를 4.0으로, B+를 3.5로, 등등
    // 만약 순서대로 정의되어 있다면, 배열이나 객체를 사용하여 변환 가능

    // 일단 간단히 A+를 4.5, A를 4.0, B+를 3.5로 가정
    switch (grade) {
        case 'A+':
            return 4.5;
        case 'A':
            return 4.0;
        case 'B+':
            return 3.5;
        // 나머지 학점에 대한 처리를 추가
        default:
            return 0.0;  // 기본값 설정
    }
}

// 결과 출력
console.log("평균 학점: " + averageGrade.toFixed(2));  // 결과를 소수점 둘째 자리까지 표시


 */
</script>

