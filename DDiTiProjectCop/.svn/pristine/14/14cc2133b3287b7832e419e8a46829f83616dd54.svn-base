<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.IBoardMapper">

	<sql id="academicPSearch">
		<if test="searchType != null and searchType == 'title'">
			and (title like '%'||#{searchWord}||'%')
		</if>
		<if test="searchType != null and searchType == 'content'">
			and (content like '%'||#{searchWord}||'%')
		</if>
	</sql>
	
	<select id="academicPList" resultType="boardVO">
		select
			b.*
		from (
			select
				a.*, row_number() over (order by a.brd_no desc) rnum
			from (
				select *
				from board
				where brd_type = 'BRD001'
				and 1 = 1
				<include refid="academicPSearch" />
				order by brd_no desc
			) a
		) b
		<![CDATA[
			where b.rnum >= #{startRow} and b.rnum <= #{endRow}
		]]>
	</select>
	
	<select id="noticeWidget" resultType="boardVO">
		select rownum, b.* 
		from ( select * from board
				where brd_type = 'BRD001' and 1 = 1
				order by brd_no desc
		) b
		where <![CDATA[ rownum <= 3 ]]>
	</select>
	
	<select id="academicPCount" resultType="int">
		select count(brd_no) from board where brd_type = 'BRD001' and 1 = 1
		<include refid="academicPSearch" />
	</select>
	
	<select id="lostItems" resultType="boardVO">
		SELECT
			brd_no
			, brd_title
			, brd_cont
			, file_no
		FROM board
		WHERE 
			brd_type = 'BRD002'
	</select>
	
<!-- 	<insert id="insertLostItem" parameterType="int">
	
	</insert> -->
</mapper>